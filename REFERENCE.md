# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`gpfs`](#gpfs): NCSA Spectrum Scale Puppet Module (formerly GPFS)    @summary   This module will install the latest version of GPFS for the specified   yum r
* [`gpfs::add_client`](#gpfsadd_client): Add this node to the gpfs cluster
* [`gpfs::bindmounts`](#gpfsbindmounts): Create bindmounts as specified in Hiera
* [`gpfs::cron`](#gpfscron): Install cron jobs for:    - Exempt gpfs from linux kernel OOM killer    - (OPTIONAL) accept license for all nodes in cluster  Parameters:    
* [`gpfs::firewall`](#gpfsfirewall): Parameters:     allow_from - allow incoming traffic from these sources                  on GPFS specific tcp ports
* [`gpfs::install`](#gpfsinstall): Manage a gpfs yum repo (optional) & Install GPFS
Parameters:
  yumrepo_baseurl - Yum repo from which to install gpfs client packages
                    This will control the version of gpfs
                    Set this to empty string to disable yumrepo management
  pkg_list        - OPTIONAL
                    list of dependent OS packages to install
                    default value defined in module hiera
* [`gpfs::nativemounts`](#gpfsnativemounts): Mount all specified GPFS filesystems
* [`gpfs::quota`](#gpfsquota): NCSA custom quota command   @summary  Override native gpfs quota command with a script that will  invoke a custom quota command on the gpfs s
* [`gpfs::startup`](#gpfsstartup): @summary  Start GPFS and wait for verification that it started successfully  PARAMETERS    cmds - OPTIONAL           default values set in mo

### Defined types

* [`gpfs::bindmount`](#gpfsbindmount): Create a bindmount  Note: this defined type is not intended to be invoked directly,       but rather via gpfs::bindmounts  PARAMETERS:   (nam
* [`gpfs::nativemount`](#gpfsnativemount): Create mount options file, populated with specified options
Ensure parent (mountpoint) directory exists
Ensure the filesystem is mounted

Name: gpfs filesystem name
Parameters:
  opts       - OPTIONAL
               comma separated string of additional mount options
               defaults to 'noauto'
               note: 'noauto' will always be included in the options
                     (cannot be overridden)
  mountpoint - OPTIONAL
               where the filesystem is mounted at
               defaults to '/FSNAME', where FSNAME is replaced with the
               gpfs filesystem name
               note: this must match the mountpoint specified in the gpfs
                     filesystem configuration (ie: mmlsfs)

## Classes

### <a name="gpfs"></a>`gpfs`

NCSA Spectrum Scale Puppet Module (formerly GPFS)

  @summary
  This module will install the latest version of GPFS for the specified
  yum repository.  GPFS version is thus controlled by yumrepo_baseurl.

  Parameters:
      resource_defaults - OPTIONAL
                          default values set in module hiera
  @example
      include gpfs

#### Parameters

The following parameters are available in the `gpfs` class:

* [`resource_defaults`](#resource_defaults)

##### <a name="resource_defaults"></a>`resource_defaults`

Data type: `Hash[String[1], Hash[String[1], Data, 1], 1]`



### <a name="gpfsadd_client"></a>`gpfs::add_client`

Add this node to the gpfs cluster

#### Parameters

The following parameters are available in the `gpfs::add_client` class:

* [`master_server`](#master_server)
* [`ssh_private_key_contents`](#ssh_private_key_contents)
* [`ssh_public_key_contents`](#ssh_public_key_contents)
* [`interface`](#interface)
* [`pagepool`](#pagepool)
* [`pagepool_max_ram_percent`](#pagepool_max_ram_percent)
* [`nodeclasses`](#nodeclasses)
* [`ssh_private_key_path`](#ssh_private_key_path)
* [`script_tgt_fn`](#script_tgt_fn)
* [`mmsdrfs`](#mmsdrfs)

##### <a name="master_server"></a>`master_server`

Data type: `String[1]`

FQDN of gpfs master server

##### <a name="ssh_private_key_contents"></a>`ssh_private_key_contents`

Data type: `String[1]`

private ssh key contents to enable ssh into master_server

##### <a name="ssh_public_key_contents"></a>`ssh_public_key_contents`

Data type: `String[1]`

public ssh key contents to enable ssh into master_server

##### <a name="interface"></a>`interface`

Data type: `String`

OPTIONAL - Name of network interface whose IP will be used to register with GPFS.
If undefined with add with default (accoring to Puppet) IP address.

##### <a name="pagepool"></a>`pagepool`

Data type: `String`

OPTIONAL - Amount of RAM to dedicate to gpfs pagepool.
Format: integer number followed by one of K, M, or G.

##### <a name="pagepool_max_ram_percent"></a>`pagepool_max_ram_percent`

Data type: `Integer`

OPTIONAL - Max percent of RAM allowed for gpfs pagepool.
Must be an integer between 10 and 90.

##### <a name="nodeclasses"></a>`nodeclasses`

Data type: `Array`

OPTIONAL - list of nodeclasses to which this node should be added master_server

##### <a name="ssh_private_key_path"></a>`ssh_private_key_path`

Data type: `String[1]`

OPTIONAL - path to store the gpfs private key (default set in module hiera)

##### <a name="script_tgt_fn"></a>`script_tgt_fn`

Data type: `String[1]`

OPTIONAL - where to store the "add_client" bash script default set in module hiera

##### <a name="mmsdrfs"></a>`mmsdrfs`

Data type: `String[1]`

OPTIONAL - path to mmsdrfs command default set in module hiera

### <a name="gpfsbindmounts"></a>`gpfs::bindmounts`

Create bindmounts as specified in Hiera

#### Examples

##### 

```puppet
This class is already included by gpfs::init, so just need to specify,
in hiera, the list of bindmounts and associated data.

HIERA
---
gpfs::bindmounts::mountmap:
    /scratch:
        opts: nosuid
        src_path:  /lsst/scratch
        src_mountpoint: /lsst
```

#### Parameters

The following parameters are available in the `gpfs::bindmounts` class:

* [`mountmap`](#mountmap)

##### <a name="mountmap"></a>`mountmap`

Data type: `Hash`



Default value: `{}`

### <a name="gpfscron"></a>`gpfs::cron`

Install cron jobs for:
   - Exempt gpfs from linux kernel OOM killer
   - (OPTIONAL) accept license for all nodes in cluster

Parameters:
    accept_license - Boolean - install cron script to auto accept license

#### Parameters

The following parameters are available in the `gpfs::cron` class:

* [`accept_license`](#accept_license)

##### <a name="accept_license"></a>`accept_license`

Data type: `Boolean`



### <a name="gpfsfirewall"></a>`gpfs::firewall`

Parameters:
    allow_from - allow incoming traffic from these sources
                 on GPFS specific tcp ports

#### Parameters

The following parameters are available in the `gpfs::firewall` class:

* [`allow_from`](#allow_from)

##### <a name="allow_from"></a>`allow_from`

Data type: `Array[String[1], 1]`



### <a name="gpfsinstall"></a>`gpfs::install`

Manage a gpfs yum repo (optional) & Install GPFS
Parameters:
  yumrepo_baseurl - Yum repo from which to install gpfs client packages
                    This will control the version of gpfs
                    Set this to empty string to disable yumrepo management
  pkg_list        - OPTIONAL
                    list of dependent OS packages to install
                    default value defined in module hiera

#### Parameters

The following parameters are available in the `gpfs::install` class:

* [`yumrepo_baseurl`](#yumrepo_baseurl)
* [`pkg_list`](#pkg_list)

##### <a name="yumrepo_baseurl"></a>`yumrepo_baseurl`

Data type: `String`



##### <a name="pkg_list"></a>`pkg_list`

Data type: `Array[String[1], 1]`



### <a name="gpfsnativemounts"></a>`gpfs::nativemounts`

Mount all specified GPFS filesystems

#### Examples

##### 

```puppet
This class is already included from gpfs::init, so just need to
specify, in hiera, which filesystems to mount

HIERA
---
gpfs::nativemounts::mountmap:
    lsst:
        opts: ro
```

#### Parameters

The following parameters are available in the `gpfs::nativemounts` class:

* [`mountmap`](#mountmap)

##### <a name="mountmap"></a>`mountmap`

Data type: `Hash`



Default value: `{}`

### <a name="gpfsquota"></a>`gpfs::quota`

NCSA custom quota command

 @summary
 Override native gpfs quota command with a script that will
 invoke a custom quota command on the gpfs server specified by
 $host on $port.

#### Parameters

The following parameters are available in the `gpfs::quota` class:

* [`host`](#host)
* [`port`](#port)

##### <a name="host"></a>`host`

Data type: `String[1]`



##### <a name="port"></a>`port`

Data type: `Integer[1, 65535]`



### <a name="gpfsstartup"></a>`gpfs::startup`

@summary
 Start GPFS and wait for verification that it started successfully
 PARAMETERS
   cmds - OPTIONAL
          default values set in module hiera

#### Parameters

The following parameters are available in the `gpfs::startup` class:

* [`cmds`](#cmds)

##### <a name="cmds"></a>`cmds`

Data type: `Hash[String[1], String[1], 2, 2]`



## Defined types

### <a name="gpfsbindmount"></a>`gpfs::bindmount`

Create a bindmount

Note: this defined type is not intended to be invoked directly,
      but rather via gpfs::bindmounts

PARAMETERS:
  (name)         - The target mountpath of this bindmount
                   (ie: the directory path users will see)
  src_path       - The source of this bindmount
                   (ie: the directory this bindmount will point to)
  src_mountpoint - The mountpath of the gpfs filesystem
                   that this bindmount depends on
  opts           - Comma separated list of mount options

#### Parameters

The following parameters are available in the `gpfs::bindmount` defined type:

* [`src_path`](#src_path)
* [`src_mountpoint`](#src_mountpoint)
* [`opts`](#opts)

##### <a name="src_path"></a>`src_path`

Data type: `String[1]`



##### <a name="src_mountpoint"></a>`src_mountpoint`

Data type: `String[1]`



##### <a name="opts"></a>`opts`

Data type: `String`



Default value: `''`

### <a name="gpfsnativemount"></a>`gpfs::nativemount`

Represent a native gpfs filesystem mount

#### Examples

##### 

```puppet
gpfs::nativemount { 'software': }

gpfs::nativemount { 'data':
    opts='ro,nosuid',
    mountpoint='/data' }
}
```

#### Parameters

The following parameters are available in the `gpfs::nativemount` defined type:

* [`opts`](#opts)
* [`mountpoint`](#mountpoint)

##### <a name="opts"></a>`opts`

Data type: `Any`



Default value: `''`

##### <a name="mountpoint"></a>`mountpoint`

Data type: `Any`



Default value: `''`

